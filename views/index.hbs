<div class="mb-2">
  <form action="/" method="GET">
    <select class="form-control" name="categoryId" id="categoryId" onchange="this.form.submit()">
      <option value="">全部類別 (依類別篩選)</option>
      {{#each categories}}
        <option value="{{ this._id }}" {{ this.selected }}>{{ this.name }}</option>
      {{/each}}
    </select>
  </form>
</div>

<div class="col mb-3 pt-2 d-flex justify-content-between amount-content">
  <div class="amount-label">總金額:</div>
  <div class="total-amount">
    <h1 class="m-0 mb-1">
      {{#if totalAmount }}
          {{ numberAmount }}
        {{else}}
          0 <p class="smallText mb-1">提示：按下方"新增支出"開始記帳吧!</p>
        {{/if}}
    </h1>
  </div>
</div>

<div class="col mb-3 d-flex justify-content-center">
  <a href="./records/new" class="btn btn-info">新增支出</a>
</div>

<div class="col row mb-3 px-0 pb-2 records justify-content-between align-items-center">
  {{#each records}}
    <div class="col-sm-10 mb-1 record-item d-flex">
      <div class="row flex-fill">
        <div class="d-flex align-items-center justify-content-center icon-item">
          <i class="{{this.categoryId.icon}} fa-2x ps-4"></i>
        </div>
        <div class="col py-1">
          <div><h3 class="mb-0 mt-1 name-item"><a href="./records/{{ this._id }}" class="">{{this.name}}</a></h3></div>
          <div><small>{{this.date}}</small></div>
        </div>
        <div class="col d-flex align-items-center amount-item">
          <h4 class="m-0 pe-4 flex-fill">{{this.amount}}</h4>
        </div>
      </div>
    </div>

    <div class="">
      <a href='./records/{{this._id}}/edit' class="btn btn-secondary"><i class="fas fa-edit"></i></a>
    </div>
    <form action="./records/{{ this._id }}/?_method=DELETE" method="POST" class="">
      <button type="submit" class="btn btn-danger"><i class="fas fa-trash-alt"></i></button>
    </form>
  {{/each}}
</div>
